<!DOCTYPE html>

    <head>
        <meta charset="utf8">
        <title>MADetect home page</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">

        <!-- 字體 -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Chewy&display=swap" rel="stylesheet">

        <!-- 小圖示 -->
        <script src="https://kit.fontawesome.com/cc70429ece.js" crossorigin="anonymous"></script>

        <!-- Bootstrap導入程式--> 
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    
    </head>
    <body >
        
        <div class="l_container" >
            <div class="side">
                <div class="header">
                    <div class="name">
                        <a class="name" href="">MADetect</a>
                    </div>
                </div>
                <div class="l_middle">
                    <div class="title">
                        <div class="text">青春痘</div>
                        <div class="icon">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </div>
                        <div class="icon">
                            <i class="fa-solid fa-trash-can"></i> 
                        </div>   
                    </div>
                    <div class="title">
                        <div class="text">青春痘</div>
                        <div class="icon">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </div>
                        <div class="icon">
                            <i class="fa-solid fa-trash-can"></i> 
                        </div>   
                    </div>
                    <div class="title">
                        <div class="text">青春痘</div>
                        <div class="icon">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </div>
                        <div class="icon">
                            <i class="fa-solid fa-trash-can"></i> 
                        </div>   
                    </div>
                    <div class="title">
                        <div class="text">青春痘</div>
                        <div class="icon">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </div>
                        <div class="icon">
                            <i class="fa-solid fa-trash-can"></i> 
                        </div>   
                    </div>
                    
                </div>
                <div class="l_report">
                    <a href="#" type="button" data-bs-toggle="modal" data-bs-target="#report" >問題回報</a>
                </div>
                <div class="l_bottom">
                    <div class="l_bottom_l">
                        <a href="#" type="button" data-bs-toggle="modal" data-bs-target="#account" class="l_word">Account</a>
                    </div>
                    <div class="l_bottom_r">
                        <a class="r_word" href="/signout">Log Out</a>
                    </div>
                </div>
            </div>
            <div class="r_side" >
                <div class="r_container">
                    <div class="title">請輸入廣告詞</div>
                    <div class="input-block">
                      <div class="editable-content" contenteditable="true"></div>
                    </div>
                    <div class="button-container">
                      <button class="custom-button" onclick="addNewElements()"><img src="/static/pic/send4.png" width="24px" height="24px"></button>
                    </div>
            </div>
        </div>

                <!--跳出視窗內容 Account -->

                <div class="modal fade" id="account" tabindex="-1" aria-labelledby="accountModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
        
                            <div class="modal-header">
                                <h4 class="modal-title" id="accountModalLabel">帳戶設定</h4>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
        
                            <div class="modal-body">
                                <form>
                                    <div class="form-group">
                                        <input type="email" class="account form-control" placeholder="Email">
                                    </div>
                                    <div class="form-group">
                                        <input type="password" class="password form-control" placeholder="Password">
                                    </div>
                                    <div class="from-group text-center">
                                        <button type="button" class="btn btn-info ">儲存</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!--跳出視窗內容 Report -->
                <div class="modal fade" id="report" tabindex="-1" aria-labelledby="accountModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
        
                            <div class="modal-header">
                                <h4 class="modal-title" id="accountModalLabel">問題回報</h4>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
        
                            <div class="modal-body">
                                <form>
                                    <div class="mb-3">
                                        <textarea class="form-control" id="message-text"></textarea>
                                    </div>
                                    <div class="from-group text-center">
                                        <button type="button" class="btn btn-info ">回報</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

        <script>
             
            function addNewElements() {
                var editableContent = document.querySelector('.editable-content');
                var container = document.querySelector('.r_side .r_container');
                var content = editableContent.innerHTML;

                var customButton = document.querySelector('.custom-button');
                customButton.disabled = true;

                var newDivPink = createNewDiv('以下是違反法條：', 'pink-bg', false);
                var newDivLgreen = createNewDiv('以下是修改後的廣告詞：', 'Lgreen-bg', false);
                var newDivBlackLine = createNewBlackLine();
                var newDivDgreen = createNewDiv('請輸入廣告詞', 'Dgreen-bg', true);

                container.insertAdjacentElement('afterend', newDivDgreen);
                newDivDgreen.insertAdjacentElement('beforebegin', newDivBlackLine);
                newDivBlackLine.insertAdjacentElement('beforebegin', newDivLgreen);
                newDivLgreen.insertAdjacentElement('beforebegin', newDivPink);

                var buttonContainer = document.createElement('div');
                buttonContainer.classList.add('button-container');
                newDivDgreen.appendChild(buttonContainer);

                var newButton = document.createElement('button');
                newButton.classList.add('custom-button');
                newButton.innerHTML = '<img src="/static/pic/send4.png" width="24px" height="24px" alt="送出">';
                newButton.onclick = function() {
                    addNewElementsD(newDivDgreen);
                };

                buttonContainer.appendChild(newButton);

                newDivPink.style.borderColor = window.getComputedStyle(newDivPink.querySelector('.r_side .title')).backgroundColor;
                newDivLgreen.style.borderColor = window.getComputedStyle(newDivLgreen.querySelector('.r_side .title')).backgroundColor;
                newDivDgreen.style.borderColor = window.getComputedStyle(newDivDgreen.querySelector('.r_side .title')).backgroundColor;

                editableContent.innerHTML = content;
                editableContent.setAttribute('contenteditable', 'false');

                newButton.style.width = customButton.offsetWidth + 'px';
                newButton.style.height = customButton.offsetHeight + 'px';
            }

            function addNewElementsD(container) {
                var newDivPink = createNewDiv('以下是違反法條：', 'pink-bg', false);
                var newDivLgreen = createNewDiv('以下是修改後的廣告詞：', 'Lgreen-bg', false);
                var newDivBlackLine = createNewBlackLine();
                var newDivDgreen = createNewDiv('請輸入廣告詞', 'Dgreen-bg', true);

                container.insertAdjacentElement('afterend', newDivDgreen);
                newDivDgreen.insertAdjacentElement('beforebegin', newDivBlackLine);
                newDivBlackLine.insertAdjacentElement('beforebegin', newDivLgreen);
                newDivLgreen.insertAdjacentElement('beforebegin', newDivPink);

                var buttonContainer = document.createElement('div');
                buttonContainer.classList.add('button-container');
                newDivDgreen.appendChild(buttonContainer);

                var newButton = document.createElement('button');
                newButton.classList.add('custom-button');
                newButton.innerHTML = '<img src="/static/pic/send4.png" width="24px" height="24px" alt="送出">';
                newButton.onclick = function() {
                    addNewElementsD(newDivDgreen);
                };

                buttonContainer.appendChild(newButton);

                newDivPink.style.borderColor = window.getComputedStyle(newDivPink.querySelector('.r_side .title')).backgroundColor;
                newDivLgreen.style.borderColor = window.getComputedStyle(newDivLgreen.querySelector('.r_side .title')).backgroundColor;
                newDivDgreen.style.borderColor = window.getComputedStyle(newDivDgreen.querySelector('.r_side .title')).backgroundColor;

                var customButton = newDivDgreen.querySelector('.custom-button');
                customButton.style.width = container.querySelector('.custom-button').offsetWidth + 'px';
                customButton.style.height = container.querySelector('.custom-button').offsetHeight + 'px';

                var buttonContainerWidth = buttonContainer.offsetWidth;
                newButton.style.marginLeft = buttonContainerWidth - customButton.offsetWidth + 'px';

                var newEditableContentPink = newDivPink.querySelector('.editable-content');
                var newEditableContentLgreen = newDivLgreen.querySelector('.editable-content');
                newEditableContentPink.setAttribute('contenteditable', 'false');
                newEditableContentLgreen.setAttribute('contenteditable', 'false');
            }

            function createNewDiv(titleText, bgColorClass, editable) {
                var newDiv = document.createElement('div');
                newDiv.classList.add('r_container', 'new-container', bgColorClass);

                var newTitle = document.createElement('div');
                newTitle.classList.add('title');
                newTitle.innerText = titleText;

                var newInputBlock = document.createElement('div');
                newInputBlock.classList.add('input-block');

                var newEditableContent = document.createElement('div');
                newEditableContent.classList.add('editable-content');
                newEditableContent.setAttribute('contenteditable', editable ? 'true' : 'false');
                newEditableContent.innerHTML = '';

                newInputBlock.appendChild(newEditableContent);
                newDiv.appendChild(newTitle);
                newDiv.appendChild(newInputBlock);

                return newDiv;
            }

            function createNewBlackLine() {
                var newDivBlackLine = document.createElement('div');
                newDivBlackLine.classList.add('black-line');
                return newDivBlackLine;
            }
        </script>

    </body>
</html>